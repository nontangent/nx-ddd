name: Production
on: push
jobs:
  release:
    runs-on: ubuntu-18.04
    outputs:
      is_released: ${{ steps.result.outputs.is_released }}
    steps:
      - uses: actions/checkout@v2
      - id: result
        run: echo "::set-output name=is_released::$(sh ./.github/scripts/is-released)"
  publish:
    runs-on: ubuntu-18.04
    needs: release
    if: ${{needs.build.outputs.is_released == 1}}
    steps:
      - run: echo "is_released ${{needs.build.outputs.is_released}}"